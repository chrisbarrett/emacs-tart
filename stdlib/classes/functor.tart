;; Functor type class
;;
;; Provides mapping over type constructors (higher-kinded types).

(class (Functor (f : (* -> *)))
  (fmap [a b] (((a) -> b) (f a)) -> (f b)))

;; Instances for common type constructors

(instance (Functor list)
  (fmap . mapcar))

(instance (Functor option)
  (fmap . (lambda (f x) (when x (funcall f x)))))

;; Note: Vector/array functor would need array-specific map
;; (instance (Functor vector)
;;   (fmap . seq-map))
